---
title: ssh forward
date: 2024-01-08 19:48:35
tags:
    - Tech
---
# 借助ssh实现局域网服务器访问

## 问题描述

1. 实验室一台装了3090的主机只能通过内网IP访问，访问的主机需要连到特定的wifi下
2. 如何在外网实现对这台主机的访问

## 远程端口转发

1. 客户端无法直接和服务器连接，需要借助公网IP主机做中转
2. 公网IP主机无法直接连接内网服务器，但是反之可以

分成三步实现中转

1. 内网服务器建立和公网IP主机连接
2. 客户端建立和公网IP主机的连接
3. 公网IP主机作为中间人实现数据的转发

内网服务器上监听外网端口，将其转发到内网的特定端口

```shell
ssh -NT -R 8888:localhost:22 root@111.111.111.111
```

监听外网服务器`111.111.111.111`上的8888端口，将其转发到本地的22端口

登录公网服务器ssh，随后**在公网服务器上登录**远程服务器

```shell
ssh username@localhost -p 8888
```

